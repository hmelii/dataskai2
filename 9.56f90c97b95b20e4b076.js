(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"SD6/":function(t,e,s){"use strict";s.r(e),s.d(e,"SubmitsPageModule",function(){return q});var i=s("ofXK"),n=s("tyNb"),a=s("fXoL"),c=s("rQ7a"),o=s("iB5Y"),l=s("I88u"),r=s("TC4B"),h=s("O+6x"),b=s("DCIj"),u=s("sGSV"),d=s("Hicy"),p=s("wQG6"),g=s("kRdf");function m(t,e){if(1&t){const t=a.Lb();a.Kb(0,"li",13),a.Kb(1,"label",8),a.Kb(2,"app-checkbox",9),a.Qb("onChange",function(s){a.fc(t);const i=e.$implicit;return a.Tb(2).handleChange(s,i)}),a.Jb(),a.Kb(3,"span",10),a.lc(4),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit;a.vb(2),a.Zb("checked",t.checked),a.vb(2),a.mc(t.value)}}function f(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",6),a.Kb(1,"div",7),a.Kb(2,"label",8),a.Kb(3,"app-checkbox",9),a.Qb("onChange",function(e){return a.fc(t),a.Tb().handleChange(e)}),a.Jb(),a.Kb(4,"span",10),a.lc(5,"All"),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"ul",11),a.jc(7,m,5,2,"li",12),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.vb(3),a.Zb("checked",t.all.checked),a.vb(4),a.Zb("ngForOf",t.metrics)}}const k=function(t){return{"authors-filter-active":t}};let v=(()=>{class t{constructor(t){this.taskService=t,this.all={value:"all",checked:!1,label:"all"},this.selectedAuthors=[],this.isShow=!1,this.taskService.currentTaskConfigStageMessage.subscribe(t=>{this.config=t,t.data&&(this.metrics=t.data.columns.filter(t=>"metric"===t.type).map(t=>({value:t.name,label:t.name,checked:!1})))})}ngOnInit(){}handleClick(){this.isShow=!this.isShow}handleClickedOutside(t){this.isShow&&(this.isShow=!1)}handleChange(t,e){if(e){const s=this.selectedAuthors.findIndex(t=>t===e.value);!0===t?(s<0&&this.selectedAuthors.push(e.value),e.checked=!0):(this.all.checked=!1,this.selectedAuthors.splice(s,1),e.checked=!1),this.metrics.length===this.selectedAuthors.length&&(this.all.checked=!0)}else!0===t?(this.all.checked=!0,this.metrics=this.metrics.map(t=>Object.assign(Object.assign({},t),{checked:!0})),this.selectedAuthors=this.metrics.map(t=>t.value)):(this.all.checked=!1,this.metrics=this.metrics.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedAuthors=[])}}return t.\u0275fac=function(e){return new(e||t)(a.Fb(u.a))},t.\u0275cmp=a.zb({type:t,selectors:[["app-metric-service-in-submits"]],decls:7,vars:5,consts:[[1,"metric-service-in-submits",3,"clickOutside"],[1,"metric-service-in-submits-selected",3,"click"],[1,"metric-service-in-submits-ico"],["type","union"],[1,"metric-service-in-submits-text"],["class","authors-filter-sub",4,"ngIf"],[1,"authors-filter-sub"],[1,"authors-filter-heading"],[1,"select-label"],[1,"select-label-checkbox",3,"checked","onChange"],[1,"select-label-title"],[1,"select-list"],["class","select-item",4,"ngFor","ngForOf"],[1,"select-item"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.Qb("clickOutside",function(t){return e.handleClickedOutside(t)}),a.Kb(1,"a",1),a.Qb("click",function(){return e.handleClick()}),a.Kb(2,"span",2),a.Gb(3,"app-icon",3),a.Jb(),a.Kb(4,"span",4),a.lc(5,"metric service"),a.Jb(),a.Jb(),a.jc(6,f,8,2,"div",5),a.Jb()),2&t&&(a.xb(a.bc(3,k,e.isShow)),a.vb(6),a.Zb("ngIf",e.isShow))},directives:[d.a,p.a,i.j,g.a,i.i],styles:["[_nghost-%COMP%]{position:absolute;right:111px}.metric-service-in-submits-selected[_ngcontent-%COMP%]{display:flex;height:20px;align-items:center;color:var(--button-color-default);font-size:1.3rem}.metric-service-in-submits-ico[_ngcontent-%COMP%]{width:16px;height:16px;font-size:0;margin-right:4px}.authors-filter-sub[_ngcontent-%COMP%]{width:200px;background:var(--background-secondary);padding:11px 8px;border-radius:3px;position:absolute;top:100%;left:50%;z-index:1;transform:translate(-50%,4px)}.select-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 -8px 0 0;padding:0 8px 0 0;list-style:none;max-height:450px;overflow-y:auto}.select-item[_ngcontent-%COMP%]{margin:0 0 16px;padding:0;font-size:1.2rem;line-height:1.1666666667}.select-item[_ngcontent-%COMP%]:last-child{margin:0}.authors-filter-heading[_ngcontent-%COMP%]{border-bottom:1px solid #494c50;padding-bottom:9px;margin-bottom:9px}.select-item--active[_ngcontent-%COMP%]{color:var(--accent-text-color-default);font-weight:700}.select-label-checkbox[_ngcontent-%COMP%]{margin-right:8px}.select-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;color:inherit}.author-filter-btn-text[_ngcontent-%COMP%]{display:block;white-space:nowrap;max-width:145px;overflow:hidden;position:relative;text-overflow:ellipsis}"]}),t})();function C(t,e){if(1&t){const t=a.Lb();a.Kb(0,"li",12),a.Kb(1,"label",7),a.Kb(2,"app-checkbox",8),a.Qb("onChange",function(s){a.fc(t);const i=e.$implicit;return a.Tb(2).handleChange(s,i)}),a.Jb(),a.Kb(3,"span",9),a.lc(4),a.Jb(),a.Jb(),a.Jb()}if(2&t){const t=e.$implicit;a.vb(2),a.Zb("checked",t.checked),a.vb(2),a.mc(t.label)}}function x(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",5),a.Kb(1,"div",6),a.Kb(2,"label",7),a.Kb(3,"app-checkbox",8),a.Qb("onChange",function(e){return a.fc(t),a.Tb().handleChange(e)}),a.Jb(),a.Kb(4,"span",9),a.lc(5,"All"),a.Jb(),a.Jb(),a.Jb(),a.Kb(6,"ul",10),a.jc(7,C,5,2,"li",11),a.Jb(),a.Jb()}if(2&t){const t=a.Tb();a.vb(3),a.Zb("checked",t.all.checked),a.vb(4),a.Zb("ngForOf",t.columns)}}const w=function(t){return{"authors-filter-active":t}};let S=(()=>{class t{constructor(t){this.taskService=t,this.all={value:"all",label:"all",checked:!0},this.selectedColumns=[],this.isShow=!1,this.taskService.currentTaskConfigStageMessage.subscribe(t=>{this.config=t,t.data&&(this.columns=t.data.columns.map(t=>({value:t.id,label:t.name,checked:!t.isHidden})))})}ngOnInit(){}handleClick(){this.isShow=!this.isShow}handleClickedOutside(t){this.isShow&&(this.isShow=!1)}handleChange(t,e){if(e){const s=this.selectedColumns.findIndex(t=>t===e.value);!1===t?(s<0&&this.selectedColumns.push(e.value),e.checked=!0):(this.selectedColumns.splice(s,1),e.checked=!1),this.all.checked=0===this.selectedColumns.length}else!1===t?(this.all.checked=!1,this.columns=this.columns.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedColumns=this.columns.map(t=>t.value)):(this.all.checked=!1,this.columns=this.columns.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedColumns=[]);this.taskService.updateTaskConfigMessage(Object.assign(Object.assign({},this.config),{data:Object.assign(Object.assign({},this.config.data),{columns:this.config.data.columns.map(t=>Object.assign(Object.assign({},t),{isHidden:this.selectedColumns.includes(t.id)}))})}))}}return t.\u0275fac=function(e){return new(e||t)(a.Fb(u.a))},t.\u0275cmp=a.zb({type:t,selectors:[["app-table-col-switcher"]],decls:5,vars:5,consts:[[1,"metric-service-in-submits",3,"clickOutside"],[1,"metric-service-in-submits-selected",3,"click"],[1,"table-col-switcher-ico"],["type","table"],["class","authors-filter-sub",4,"ngIf"],[1,"authors-filter-sub"],[1,"authors-filter-heading"],[1,"select-label"],[1,"select-label-checkbox",3,"checked","onChange"],[1,"select-label-title"],[1,"select-list"],["class","select-item",4,"ngFor","ngForOf"],[1,"select-item"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.Qb("clickOutside",function(t){return e.handleClickedOutside(t)}),a.Kb(1,"a",1),a.Qb("click",function(){return e.handleClick()}),a.Kb(2,"span",2),a.Gb(3,"app-icon",3),a.Jb(),a.Jb(),a.jc(4,x,8,2,"div",4),a.Jb()),2&t&&(a.xb(a.bc(3,w,e.isShow)),a.vb(4),a.Zb("ngIf",e.isShow))},directives:[d.a,p.a,i.j,g.a,i.i],styles:["[_nghost-%COMP%]{position:absolute;right:74px}.metric-service-in-submits-selected[_ngcontent-%COMP%]{display:flex;width:20px;height:20px;position:relative;color:var(--button-color-default);font-size:0}.table-col-switcher-ico[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;width:12px;height:12px;font-size:0;margin:auto 4px auto auto}.authors-filter-sub[_ngcontent-%COMP%]{width:200px;background:var(--background-secondary);padding:11px 8px;border-radius:3px;position:absolute;top:100%;left:50%;z-index:1;transform:translate(-50%,4px)}.select-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 -8px 0 0;padding:0 8px 0 0;list-style:none;max-height:450px;overflow-y:auto}.select-item[_ngcontent-%COMP%]{margin:0 0 16px;padding:0;font-size:1.2rem;line-height:1.1666666667}.select-item[_ngcontent-%COMP%]:last-child{margin:0}.authors-filter-heading[_ngcontent-%COMP%]{border-bottom:1px solid #494c50;padding-bottom:9px;margin-bottom:9px}.select-item--active[_ngcontent-%COMP%]{color:var(--accent-text-color-default);font-weight:700}.select-label-checkbox[_ngcontent-%COMP%]{margin-right:8px}.select-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;color:inherit}.author-filter-btn-text[_ngcontent-%COMP%]{display:block;white-space:nowrap;max-width:145px;overflow:hidden;position:relative;text-overflow:ellipsis}"]}),t})();var O=s("Bz6d"),I=s("m6/c"),P=s("qvlg"),j=s("jPzB"),J=s("or5V"),K=s("m0za"),y=s("b6eW"),_=s("xniV"),T=s("Lab3"),M=s("G8Z/"),D=s("Dvgy"),G=s("TImZ"),z=s("UqID"),Z=s("ueR6");function F(t,e){if(1&t&&a.Gb(0,"app-row-per-page",6),2&t){const t=a.Tb(2);a.Zb("rows",t.rows)("rowsDefault",t.rowsDefault)}}function Q(t,e){if(1&t){const t=a.Lb();a.Kb(0,"div",1),a.Kb(1,"app-table",2),a.Qb("onSortChange",function(e){return a.fc(t),a.Tb().handleSortChange(e)}),a.Jb(),a.Kb(2,"app-meta-panel"),a.Kb(3,"app-pagination",3),a.Qb("onPageChange",function(e){return a.fc(t),a.Tb().pageChanged(e)}),a.Jb(),a.jc(4,F,1,2,"app-row-per-page",4),a.Jb(),a.Gb(5,"app-table-modal"),a.Gb(6,"app-features-info",5),a.Jb()}if(2&t){const t=a.Tb();a.vb(1),a.Zb("colsItems",t.taskConfigColumns)("rowsItems",t.taskSubmits)("sortCol",t.sortColumn)("sortOrder",t.sortOrder)("selectRowWithID",t.routeSubmitID),a.vb(2),a.Zb("currentPage",t.currentPage)("totalPages",t.totalPages),a.vb(1),a.Zb("ngIf",t.rows)}}let $=(()=>{class t{constructor(t,e,s,i,n){this.authorsService=t,this.projectService=e,this.taskService=s,this.router=i,this.activateRoute=n,this.loading={projectInfo:!1,taskInfo:!1,config:!1},this.loaded={projectInfo:!1,taskInfo:!1,config:!1},this.taskSubmits=null,this.error=null,this.projectInfo=null,this.taskInfo=null,this.taskConfigColumns=null,this.currentPage=null,this.totalPages=null,this.rows=null,this.routeTaskID=null,this.routeSubmitID=null,this.sortColumn=null,this.sortOrder=null,this.subscribeSubmitsUpdates(),this.subscribeTaskConfigUpdates(),this.subscribeRouteUpdate()}ngOnInit(){this.fetchTaskInfo(),this.fetchProjectInfo()}subscribeRouteUpdate(){this.activateRoute.params.subscribe(t=>{this.routeTaskID=t.taskID,this.routeSubmitID=t.submitID,console.log("this.routeSubmitID",this.routeSubmitID)})}subscribeTaskConfigUpdates(){this.taskService.currentTaskConfigStageMessage.subscribe(t=>{const{loaded:e,loading:s,data:i}=t;e||s||this.taskService.getTaskConfig(),e&&!s&&i&&(this.taskConfigColumns=t.data.columns,this.rows=t.data.rows_per_page_values,this.rowsDefault=t.data.rows_per_page_default)})}subscribeSubmitsUpdates(){this.taskService.currentTaskSubmitsStageMessage.subscribe(t=>{const{loaded:e,loading:s,data:i,meta:n}=t;if(e||s||this.taskService.getTaskSubmits(),e&&!s){if(i){const{submits:t=[]}=i;this.taskSubmits=t}if(n){const{current_page:t=1,total_pages:e=1,sort_column:s=null,sort_order:i=null}=n;this.currentPage=t,this.totalPages=e,this.sortColumn=s,this.sortOrder=i}}})}changeSubmitsRoute(){this.router.navigate([`${P.a.Self}${j.a.Project}/${K.a.Tasks}/${this.routeTaskID}/${J.a.Submits}`],{queryParams:{page:this.currentPage},queryParamsHandling:"merge"})}pageChanged(t){this.currentPage!==t&&(this.currentPage=t,this.changeSubmitsRoute(),this.fetchTaskSubmits())}fetchTaskSubmits(){this.taskService.getTaskSubmits({start:this.currentPage*this.rowsDefault,sort:`${"asc"===this.sortOrder?"-":"+"}${this.sortColumn}`})}fetchTaskInfo(){this.loading.taskInfo=!0,this.taskService.fetchTaskInfo().subscribe(t=>{this.taskInfo=t,this.authorsService.updateAuthorsMessage(this.taskInfo.data.authors),this.taskService.updateTaskInfoMessage(this.taskInfo.data.task_description),this.loaded.taskInfo=!0},t=>{this.error=t.message},()=>{this.loading.taskInfo=!1})}fetchProjectInfo(){this.loading.projectInfo=!0,this.projectService.fetchProjectInfo().subscribe(t=>{this.projectInfo=t,this.projectService.updateProjectMessage(this.projectInfo.data.tasks.names),this.loaded.projectInfo=!0},t=>{this.error=t.message},()=>{this.loading.projectInfo=!1})}handleSortChange({sortOrder:t,colID:e}){console.log(t,e),this.taskService.getTaskSubmits(),this.sortOrder=t,this.sortColumn=e,this.fetchTaskSubmits()}}return t.\u0275fac=function(e){return new(e||t)(a.Fb(y.a),a.Fb(_.a),a.Fb(u.a),a.Fb(n.b),a.Fb(n.a))},t.\u0275cmp=a.zb({type:t,selectors:[["app-submits"]],decls:1,vars:1,consts:[["class","submits",4,"ngIf"],[1,"submits"],[3,"colsItems","rowsItems","sortCol","sortOrder","selectRowWithID","onSortChange"],[1,"meta-panel-pagination",3,"currentPage","totalPages","onPageChange"],[3,"rows","rowsDefault",4,"ngIf"],[1,"submits-features"],[3,"rows","rowsDefault"]],template:function(t,e){1&t&&a.jc(0,Q,7,8,"div",0),2&t&&a.Zb("ngIf",e.taskSubmits)},directives:[i.j,T.a,M.a,D.a,G.a,z.a,Z.a],styles:[""]}),t})(),A=(()=>{class t{constructor(){this.title="Submits"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.zb({type:t,selectors:[["app-submits-page"]],decls:12,vars:0,template:function(t,e){1&t&&(a.Kb(0,"app-main-layout"),a.Kb(1,"app-header"),a.Kb(2,"header-body"),a.Gb(3,"app-task-selection"),a.Jb(),a.Jb(),a.Kb(4,"app-filters-panel"),a.Gb(5,"app-authors-filter"),a.Gb(6,"app-submits-filter"),a.Gb(7,"app-metric-service-in-submits"),a.Gb(8,"app-table-col-switcher"),a.Gb(9,"app-search"),a.Jb(),a.Kb(10,"app-main"),a.Gb(11,"app-submits"),a.Jb(),a.Jb())},directives:[c.a,o.a,l.a,r.a,h.a,b.a,v,S,O.a,I.a,$],styles:[""]}),t})();const R=[{path:"",component:A},{path:":submitID",component:A}];let L=(()=>{class t{constructor(){}}return t.\u0275mod=a.Db({type:t}),t.\u0275inj=a.Cb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(R)],n.e]}),t})();var U=s("dFjG");let q=(()=>{class t{}return t.\u0275mod=a.Db({type:t}),t.\u0275inj=a.Cb({factory:function(e){return new(e||t)},imports:[[L,i.b,U.a]]}),t})()}}]);