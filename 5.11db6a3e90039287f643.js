(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{HIQp:function(t,e,s){"use strict";s.d(e,"a",function(){return g});var i=s("or5V"),n=s("m0za"),a=s("jPzB"),o=s("qvlg"),c=s("fXoL"),r=s("FDUU"),l=s("xniV"),u=s("tyNb"),b=s("sGSV");const h=function(){return{exact:!0}},d=function(t,e,s,i,n){return[t,e,s,i,n]},p=function(t,e,s,i,n,a){return[t,e,s,i,n,a]};let g=(()=>{class t{constructor(t,e,s,c){this.comparisonService=t,this.projectService=e,this.activateRoute=s,this.taskService=c,this.routeTaskID="",this.routeSubmits=i.a.Submits,this.routeTasks=n.a.Tasks,this.routeProject=a.a.Project,this.routeMain=o.a.Self,this.routeInfo=i.a.Info,this.routeComparison=i.a.ComparedSubmits,this.comparisonIDsLength=0,this.submitsLength=0,this.subscribeRouteUpdate(),this.subscribeComparisonIDsUpdate(),this.subscribeTaskInfoUpdates()}subscribeTaskInfoUpdates(){this.taskService.currentTaskInfoStageMessage.subscribe(({loaded:t,loading:e,data:s})=>{t||e||this.taskService.getTaskInfo(),t&&!e&&s&&(this.submitsLength=s.submits)})}subscribeComparisonIDsUpdate(){this.comparisonService.currentComparisonIDSStageMessage.subscribe(t=>{this.routeTaskID&&t[this.routeTaskID]&&(this.comparisonIDsLength=t[this.routeTaskID].length)})}subscribeRouteUpdate(){this.activateRoute.params.subscribe(t=>{this.routeTaskID=t.taskID})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(r.a),c.Jb(l.a),c.Jb(u.a),c.Jb(b.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-task-main-tabs"]],decls:8,vars:21,consts:[[1,"main-tabs"],[1,"main-tabs-list"],["routerLinkActive","main-tabs-item--active",1,"main-tabs-item",3,"routerLinkActiveOptions"],[1,"main-tabs-link",3,"routerLink"]],template:function(t,e){1&t&&(c.Pb(0,"nav",0),c.Pb(1,"ul",1),c.Pb(2,"li",2),c.Pb(3,"a",3),c.vc(4),c.Ob(),c.Ob(),c.Pb(5,"li",2),c.Pb(6,"a",3),c.vc(7),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.yb(2),c.fc("routerLinkActiveOptions",c.gc(6,h)),c.yb(1),c.fc("routerLink",c.kc(7,d,e.routeMain,e.routeProject,e.routeTasks,e.routeTaskID,e.routeSubmits)),c.yb(1),c.xc("SUBMITS (",e.submitsLength,")"),c.yb(1),c.fc("routerLinkActiveOptions",c.gc(13,h)),c.yb(1),c.fc("routerLink",c.lc(14,p,e.routeMain,e.routeProject,e.routeTasks,e.routeTaskID,e.routeSubmits,e.routeComparison)),c.yb(1),c.xc("COMPARISON (",e.comparisonIDsLength,")"))},directives:[u.c,u.d],styles:[".main-tabs[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:8px}.main-tabs-list[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row;flex-wrap:nowrap;margin:0;padding:0;list-style:none}.main-tabs-item[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.3rem;line-height:2.4615384615;color:var(--text-color-default)}.main-tabs-item--active[_ngcontent-%COMP%]{background:var(--foreground-secondary);border-radius:2px 2px 0 0}.main-tabs-link[_ngcontent-%COMP%]{display:block;padding:0 12px;color:inherit;text-decoration:none}"]}),t})()},I88u:function(t,e,s){"use strict";s.d(e,"a",function(){return v});var i=s("or5V"),n=s("m0za"),a=s("jPzB"),o=s("qvlg"),c=s("fXoL"),r=s("xniV"),l=s("sGSV"),u=s("ofXK"),b=s("Hicy"),h=s("wQG6"),d=s("tyNb");const p=function(t){return{"select-item--active":t}},g=function(t,e,s,i,n){return[t,e,s,i,n]};function f(t,e){if(1&t&&(c.Pb(0,"li",10),c.Pb(1,"a",11),c.vc(2),c.Ob(),c.Ob()),2&t){const t=e.$implicit,s=e.index,i=c.Zb(2);c.Ab(c.hc(4,p,i.selectedIndex===s)),c.yb(1),c.fc("routerLink",c.kc(6,g,i.routeMain,i.routeProject,i.routeTasks,t,i.routeSubmits)),c.yb(1),c.wc(t)}}const m=function(t){return{"select--active":t}};function k(t,e){if(1&t){const t=c.Qb();c.Pb(0,"div",1),c.Wb("clickOutside",function(e){return c.pc(t),c.Zb().onClickedOutside(e)}),c.Pb(1,"div",2),c.Wb("click",function(){return c.pc(t),c.Zb().handleClick()}),c.Pb(2,"div",3),c.vc(3),c.Ob(),c.Pb(4,"div",4),c.Kb(5,"app-icon",5),c.Ob(),c.Ob(),c.Pb(6,"div",6),c.Pb(7,"div",7),c.vc(8,"Ammiak project"),c.Ob(),c.Pb(9,"ul",8),c.tc(10,f,3,12,"li",9),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.Zb();c.Ab(c.hc(4,m,t.isShow)),c.yb(3),c.wc(t.taskName),c.yb(7),c.fc("ngForOf",t.tasks)}}let v=(()=>{class t{constructor(t,e){this.projectService=t,this.taskService=e,this.tasks=null,this.selectedIndex=0,this.routeSubmits=i.a.Submits,this.routeTasks=n.a.Tasks,this.routeProject=a.a.Project,this.routeMain=o.a.Self,this.taskName=null,this.isShow=!1,this.subscribeProjectInfoUpdates(),this.subscribeTasksInfoUpdates()}ngOnInit(){}subscribeTasksInfoUpdates(){this.taskService.currentTaskInfoStageMessage.subscribe(({data:t})=>{t&&t.task_name&&(this.taskName=t.task_name)})}subscribeProjectInfoUpdates(){this.projectService.currentProjectInfoStageMessage.subscribe(({loaded:t,loading:e,data:s})=>{t||e||this.projectService.getProjectInfo(),s&&s.tasks&&(this.tasks=s.tasks.names)})}handleClick(){this.isShow=!this.isShow}handleItemClick(t){this.selectedIndex=t}onClickedOutside(t){this.isShow&&(this.isShow=!1)}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(r.a),c.Jb(l.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-task-selection"]],decls:1,vars:1,consts:[["class","select",3,"class","clickOutside",4,"ngIf"],[1,"select",3,"clickOutside"],[1,"select-value",3,"click"],[1,"select-value-text"],[1,"select-ico"],["type","triangle"],[1,"select-sub"],[1,"select-heading"],[1,"select-list"],["class","select-item",3,"class",4,"ngFor","ngForOf"],[1,"select-item"],[1,"select-link",3,"routerLink"]],template:function(t,e){1&t&&c.tc(0,k,11,6,"div",0),2&t&&c.fc("ngIf",e.tasks&&e.tasks.length)},directives:[u.k,b.a,h.a,u.j,d.d],styles:["[_nghost-%COMP%]{width:330px;position:absolute;top:12px;left:64px;z-index:100}.select[_ngcontent-%COMP%]{cursor:pointer;height:24px}.select[_ngcontent-%COMP%], .select-value-text[_ngcontent-%COMP%]{display:block;position:relative}.select-value-text[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.select-value[_ngcontent-%COMP%]{display:inline-block;padding-right:24px;height:24px;font-size:1.4rem;line-height:1.7142857143;max-width:218px;position:relative;color:var(--button-color-default);font-weight:500}.select-heading[_ngcontent-%COMP%]{margin-bottom:16px;padding:0 7px;font-size:1.6rem;line-height:1.5;font-weight:500}.select-sub[_ngcontent-%COMP%]{background:var(--background-secondary);border-radius:3px;padding:24px 8px;position:absolute;top:100%;left:0;right:0;transform:translateY(4px);opacity:0;visibility:hidden;transition:all .3s ease}.select--active[_ngcontent-%COMP%]   .select-sub[_ngcontent-%COMP%]{opacity:1;visibility:visible}.select-list[_ngcontent-%COMP%]{max-height:170px;overflow-y:auto;display:flex;flex-direction:column;margin:0 -8px 0 0;padding:0 8px 0 0;list-style:none}.select-item[_ngcontent-%COMP%]{margin:0;padding:0;font-size:1.2rem;text-align:left;line-height:1.1666666667;white-space:nowrap;transition:all .3s ease}.select-item--active[_ngcontent-%COMP%], .select-item[_ngcontent-%COMP%]:hover{background:var(--foreground-quaternary)}.select-ico[_ngcontent-%COMP%]{width:8px;height:4px;margin:auto;position:absolute;top:0;bottom:0;right:12px;color:var(--button-color-default);font-size:0;line-height:0;transform:rotate(0deg);transition:transform .3s ease}.select--active[_ngcontent-%COMP%]   .select-ico[_ngcontent-%COMP%]{transform:rotate(-180deg)}.select-link[_ngcontent-%COMP%]{display:block;padding:8px;color:inherit}"]}),t})()},R1C8:function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("fXoL"),n=s("qkz2"),a=s("ofXK");const o=function(t){return{"events-bubble--active":t}};let c=(()=>{class t{constructor(t){this.eventsBubbleService=t,this.isShown=!1,this.message="",this.time=3,this.subscribeEventsBubbleServiceUpdates()}subscribeEventsBubbleServiceUpdates(){this.eventsBubbleService.currentEventsBubbleStageMessage.subscribe(t=>{t&&(this.isShown=!0,this.message=t,clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isShown=!1,this.timeout=setTimeout(()=>{this.eventsBubbleService.updateEventsBubbleStageMessage(null)},300)},1e3*this.time))})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(n.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-events-bubble"]],decls:2,vars:4,consts:[[1,"events-bubble",3,"ngClass"]],template:function(t,e){1&t&&(i.Pb(0,"div",0),i.vc(1),i.Ob()),2&t&&(i.fc("ngClass",i.hc(2,o,e.isShown)),i.yb(1),i.xc(" ",e.message,"\n"))},directives:[a.i],styles:[".events-bubble[_ngcontent-%COMP%]{background:var(--background-tertiary);border-radius:4px;position:fixed;width:409px;margin:auto;padding:12px;bottom:30px;left:0;right:0;text-align:center;z-index:99;opacity:0;visibility:hidden;transition:all .3s ease}.events-bubble--active[_ngcontent-%COMP%]{opacity:1;visibility:visible}"]}),t})()},"SD6/":function(t,e,s){"use strict";s.r(e),s.d(e,"SubmitsPageModule",function(){return Q});var i=s("ofXK"),n=s("tyNb"),a=s("fXoL"),o=s("rQ7a"),c=s("iB5Y"),r=s("I88u"),l=s("HIQp"),u=s("TC4B"),b=s("sGSV"),h=s("xniV"),d=s("Hicy"),p=s("wQG6"),g=s("kRdf");function f(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",13),a.Pb(1,"label",8),a.Pb(2,"app-checkbox",9),a.Wb("onChange",function(s){a.pc(t);const i=e.$implicit;return a.Zb(2).handleChange(s,i)}),a.Ob(),a.Pb(3,"span",10),a.vc(4),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit;a.yb(2),a.fc("checked",t.checked),a.yb(2),a.wc(t.value)}}function m(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",6),a.Pb(1,"div",7),a.Pb(2,"label",8),a.Pb(3,"app-checkbox",9),a.Wb("onChange",function(e){return a.pc(t),a.Zb().handleChange(e)}),a.Ob(),a.Pb(4,"span",10),a.vc(5,"All"),a.Ob(),a.Ob(),a.Ob(),a.Pb(6,"ul",11),a.tc(7,f,5,2,"li",12),a.Ob(),a.Ob()}if(2&t){const t=a.Zb();a.yb(3),a.fc("checked",t.all.checked),a.yb(4),a.fc("ngForOf",t.authors)}}const k=function(t){return{"authors-filter-active":t}};let v=(()=>{class t{constructor(t,e){this.taskService=t,this.projectService=e,this.all={value:"all",checked:!1,label:"all"},this.selectedAuthors=[],this.isShow=!1,this.subscribeTaskInfoUpdates()}subscribeTaskInfoUpdates(){this.taskService.currentTaskInfoStageMessage.subscribe(({loaded:t,loading:e,data:s})=>{t&&!e&&s&&(this.authors=s.authors.map(t=>({value:t,checked:!1,label:t})))})}ngOnInit(){}handleClick(){this.isShow=!this.isShow}handleClickedOutside(t){this.isShow&&(this.isShow=!1)}handleChange(t,e){if(e){const s=this.selectedAuthors.findIndex(t=>t===e.value);!0===t?(s<0&&this.selectedAuthors.push(e.value),e.checked=!0):(this.all.checked=!1,this.selectedAuthors.splice(s,1),e.checked=!1),this.authors.length===this.selectedAuthors.length&&(this.all.checked=!0)}else!0===t?(this.all.checked=!0,this.authors=this.authors.map(t=>Object.assign(Object.assign({},t),{checked:!0})),this.selectedAuthors=this.authors.map(t=>t.value)):(this.all.checked=!1,this.authors=this.authors.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedAuthors=[])}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(b.a),a.Jb(h.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-task-authors-filter"]],decls:7,vars:7,consts:[[1,"authors-filter",3,"clickOutside"],[1,"authors-filter-btn",3,"click"],[1,"author-filter-btn-ico"],[3,"type"],[1,"author-filter-btn-text"],["class","authors-filter-sub",4,"ngIf"],[1,"authors-filter-sub"],[1,"authors-filter-heading"],[1,"select-label"],[1,"select-label-checkbox",3,"checked","onChange"],[1,"select-label-title"],[1,"select-list"],["class","select-item",4,"ngFor","ngForOf"],[1,"select-item"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Wb("clickOutside",function(t){return e.handleClickedOutside(t)}),a.Pb(1,"a",1),a.Wb("click",function(){return e.handleClick()}),a.Pb(2,"span",2),a.Kb(3,"app-icon",3),a.Ob(),a.Pb(4,"span",4),a.vc(5),a.Ob(),a.Ob(),a.tc(6,m,8,2,"div",5),a.Ob()),2&t&&(a.Ab(a.hc(5,k,e.isShow)),a.yb(3),a.fc("type","man"),a.yb(2),a.wc(e.selectedAuthors.length?e.selectedAuthors.join(", "):"Authors filter"),a.yb(1),a.fc("ngIf",e.isShow))},directives:[d.a,p.a,i.k,g.a,i.j],styles:['.authors-filter[_ngcontent-%COMP%]{margin-right:36px}.author-filter-btn-ico[_ngcontent-%COMP%]{display:inline-block;margin-right:7px;width:10px;height:10px}.authors-filter-btn[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;padding-right:16px;color:var(--text-color-default);font-size:1.3rem;line-height:1.5384615385;text-decoration:none}.authors-filter-btn[_ngcontent-%COMP%]:after{content:"";width:0;height:0;border-left:3.645px solid transparent;border-bottom:0 solid transparent;border-right:3.645px solid transparent;border-top:3.9px solid var(--text-color-default);margin:auto;position:absolute;top:0;bottom:0;right:0;transform:rotate(0deg);transition:all .3s ease}.authors-filter-active[_ngcontent-%COMP%]   .authors-filter-btn[_ngcontent-%COMP%]:after{transform:rotate(-180deg)}.authors-filter-sub[_ngcontent-%COMP%]{width:200px;background:var(--background-secondary);padding:11px 8px;border-radius:3px;position:absolute;top:100%;left:0;z-index:100;transform:translateY(4px)}.select-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 -8px 0 0;padding:0 8px 0 0;list-style:none;max-height:450px;overflow-y:auto}.select-item[_ngcontent-%COMP%]{margin:0 0 16px;padding:0;font-size:1.2rem;line-height:1.1666666667}.select-item[_ngcontent-%COMP%]:last-child{margin:0}.authors-filter-heading[_ngcontent-%COMP%]{border-bottom:1px solid #494c50;padding-bottom:9px;margin-bottom:9px}.select-item--active[_ngcontent-%COMP%]{color:var(--accent-text-color-default);font-weight:700}.select-label-checkbox[_ngcontent-%COMP%]{margin-right:8px}.select-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;color:inherit}.author-filter-btn-text[_ngcontent-%COMP%]{display:block;white-space:nowrap;max-width:145px;overflow:hidden;position:relative;text-overflow:ellipsis}']}),t})();function O(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",12),a.Pb(1,"label",7),a.Pb(2,"app-checkbox",8),a.Wb("onChange",function(s){a.pc(t);const i=e.$implicit;return a.Zb(2).handleChange(s,i)}),a.Ob(),a.Pb(3,"span",9),a.vc(4),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit;a.yb(2),a.fc("checked",t.checked),a.yb(2),a.wc(t.label)}}function P(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",5),a.Pb(1,"div",6),a.Pb(2,"label",7),a.Pb(3,"app-checkbox",8),a.Wb("onChange",function(e){return a.pc(t),a.Zb().handleChange(e)}),a.Ob(),a.Pb(4,"span",9),a.vc(5,"All"),a.Ob(),a.Ob(),a.Ob(),a.Pb(6,"ul",10),a.tc(7,O,5,2,"li",11),a.Ob(),a.Ob()}if(2&t){const t=a.Zb();a.yb(3),a.fc("checked",t.all.checked),a.yb(4),a.fc("ngForOf",t.columns)}}const x=function(t){return{"authors-filter-active":t}};let C=(()=>{class t{constructor(t){this.taskService=t,this.all={value:"all",label:"all",checked:!0},this.selectedColumns=[],this.isShow=!1,this.taskService.currentTaskConfigStageMessage.subscribe(t=>{this.config=t,t.data&&(console.log(t.data.columns),this.columns=t.data.columns.map(t=>({value:t.id,label:t.name,checked:t.shown})))})}ngOnInit(){}handleClick(){this.isShow=!this.isShow}handleClickedOutside(t){this.isShow&&(this.isShow=!1)}handleChange(t,e){if(e){const s=this.selectedColumns.findIndex(t=>t===e.value);!1===t?(s<0&&this.selectedColumns.push(e.value),e.checked=!0):(this.selectedColumns.splice(s,1),e.checked=!1),this.all.checked=0===this.selectedColumns.length}else!1===t?(this.all.checked=!1,this.columns=this.columns.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedColumns=this.columns.map(t=>t.value)):(this.all.checked=!1,this.columns=this.columns.map(t=>Object.assign(Object.assign({},t),{checked:!1})),this.selectedColumns=[]);console.log(Object.assign(Object.assign({},this.config),{data:Object.assign(Object.assign({},this.config.data),{columns:this.config.data.columns.map(t=>Object.assign(Object.assign({},t),{shown:!this.selectedColumns.includes(t.id)}))})})),this.taskService.updateTaskConfigMessage(Object.assign(Object.assign({},this.config),{data:Object.assign(Object.assign({},this.config.data),{columns:this.config.data.columns.map(t=>Object.assign(Object.assign({},t),{shown:!this.selectedColumns.includes(t.id)}))})}))}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(b.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-table-col-switcher"]],decls:5,vars:5,consts:[[1,"metric-service-in-submits",3,"clickOutside"],[1,"metric-service-in-submits-selected",3,"click"],[1,"table-col-switcher-ico"],["type","table"],["class","authors-filter-sub",4,"ngIf"],[1,"authors-filter-sub"],[1,"authors-filter-heading"],[1,"select-label"],[1,"select-label-checkbox",3,"checked","onChange"],[1,"select-label-title"],[1,"select-list"],["class","select-item",4,"ngFor","ngForOf"],[1,"select-item"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Wb("clickOutside",function(t){return e.handleClickedOutside(t)}),a.Pb(1,"a",1),a.Wb("click",function(){return e.handleClick()}),a.Pb(2,"span",2),a.Kb(3,"app-icon",3),a.Ob(),a.Ob(),a.tc(4,P,8,2,"div",4),a.Ob()),2&t&&(a.Ab(a.hc(3,x,e.isShow)),a.yb(4),a.fc("ngIf",e.isShow))},directives:[d.a,p.a,i.k,g.a,i.j],styles:["[_nghost-%COMP%]{position:absolute;right:54px;top:0}.metric-service-in-submits-selected[_ngcontent-%COMP%]{display:flex;width:40px;height:40px;position:relative;color:var(--button-color-default);font-size:0;align-items:center;justify-content:center}.table-col-switcher-ico[_ngcontent-%COMP%]{width:12px;height:12px;font-size:0}.authors-filter-sub[_ngcontent-%COMP%]{width:200px;background:var(--background-secondary);padding:11px 8px;border-radius:3px;position:absolute;top:100%;left:50%;z-index:100;transform:translate(-50%,4px)}.select-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0 -8px 0 0;padding:0 8px 0 0;list-style:none;max-height:450px;overflow-y:auto}.select-item[_ngcontent-%COMP%]{margin:0 0 16px;padding:0;font-size:1.2rem;line-height:1.1666666667}.select-item[_ngcontent-%COMP%]:last-child{margin:0}.authors-filter-heading[_ngcontent-%COMP%]{border-bottom:1px solid #494c50;padding-bottom:9px;margin-bottom:9px}.select-item--active[_ngcontent-%COMP%]{color:var(--accent-text-color-default);font-weight:700}.select-label-checkbox[_ngcontent-%COMP%]{margin-right:8px}.select-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;color:inherit}.author-filter-btn-text[_ngcontent-%COMP%]{display:block;white-space:nowrap;max-width:145px;overflow:hidden;position:relative;text-overflow:ellipsis}"]}),t})();var S=s("Bz6d"),w=s("m6/c"),I=s("qvlg"),y=s("jPzB"),M=s("or5V"),_=s("m0za"),j=s("b6eW"),T=s("Lab3"),D=s("G8Z/"),U=s("Dvgy"),z=s("TImZ"),A=s("UqID"),L=s("R1C8"),J=s("ueR6");function R(t,e){if(1&t&&a.Kb(0,"app-row-per-page",6),2&t){const t=a.Zb(2);a.fc("rows",t.rows)("rowsDefault",t.rowsDefault)}}function K(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",1),a.Pb(1,"app-table",2),a.Wb("onSortChange",function(e){return a.pc(t),a.Zb().handleSortChange(e)}),a.Ob(),a.Pb(2,"app-meta-panel"),a.Pb(3,"app-pagination",3),a.Wb("onPageChange",function(e){return a.pc(t),a.Zb().pageChanged(e)}),a.Ob(),a.tc(4,R,1,2,"app-row-per-page",4),a.Ob(),a.Kb(5,"app-table-modal"),a.Kb(6,"app-features-info",5),a.Kb(7,"app-events-bubble"),a.Ob()}if(2&t){const t=a.Zb();a.yb(1),a.fc("colsItems",t.taskConfigColumns)("rowsItems",t.taskSubmits)("sortCol",t.sortColumn)("sortOrder",t.sortOrder)("selectRowWithID",t.routeSubmitID)("searchMatches",t.searchMatches)("startIndex",t.startIndex)("component","task"),a.yb(2),a.fc("currentPage",t.currentPage)("totalPages",t.totalPages),a.yb(1),a.fc("ngIf",t.rows)}}let Z=(()=>{class t{constructor(t,e,s,i,n){this.authorsService=t,this.projectService=e,this.taskService=s,this.router=i,this.activateRoute=n,this.taskSubmits=null,this.error=null,this.projectInfo=null,this.taskInfo=null,this.taskConfigColumns=null,this.currentPage=null,this.totalPages=null,this.rows=null,this.routeTaskID=null,this.routeSubmitID=null,this.sortColumn=null,this.sortOrder=null,this.searchMatches=null,this.startIndex=1,this.subscribeSubmitsUpdates(),this.subscribeTaskConfigUpdates(),this.subscribeRouteUpdate(),this.subscribeProjectInfoUpdates(),this.subscribeTaskInfoUpdates()}ngOnInit(){}subscribeRouteUpdate(){this.activateRoute.params.subscribe(t=>{this.routeTaskID=t.taskID,this.routeSubmitID=t.submitID,this.getTaskInfo(),this.getTaskSubmits()})}compare(t,e){return t.index<e.index?-1:t.index>e.index?1:0}subscribeTaskConfigUpdates(){this.taskService.currentTaskConfigStageMessage.subscribe(t=>{const{loaded:e,loading:s,data:i}=t;e||s||this.taskService.getTaskConfig(),e&&!s&&i&&(this.taskConfigColumns=t.data.columns.sort(this.compare),this.rows=t.data.rows_per_page_values,this.rowsDefault=t.data.rows_per_page_default,this.updateStartIndex())})}subscribeSubmitsUpdates(){this.taskService.currentTaskSubmitsStageMessage.subscribe(({loaded:t,loading:e,data:s,meta:i})=>{if(t||e||this.taskService.getTaskSubmits(),t&&!e){if(s){const{submits:t=[]}=s;this.taskSubmits=t}if(i){const{current_page:t=1,total_pages:e=1,sort_column:s=null,sort_order:n=null,search_matches:a=null}=i;this.currentPage=t,this.totalPages=e,this.sortColumn=s,this.sortOrder=n,this.searchMatches=a,this.updateStartIndex()}}})}updateStartIndex(){this.currentPage&&this.rowsDefault&&(this.startIndex=(this.currentPage-1)*this.rowsDefault+1)}subscribeProjectInfoUpdates(){this.projectService.currentProjectInfoStageMessage.subscribe(({loaded:t,loading:e,data:s})=>{t||e||this.getProjectInfo(),t&&!e&&s&&(this.projectInfo=s)})}subscribeTaskInfoUpdates(){this.taskService.currentTaskInfoStageMessage.subscribe(({loaded:t,loading:e,data:s})=>{t||e||this.getTaskInfo(),t&&!e&&s&&(this.taskInfo=s)})}changeSubmitsRoute(){this.router.navigate([`${I.a.Self}${y.a.Project}/${_.a.Tasks}/${this.routeTaskID}/${M.a.Submits}`],{queryParams:{page:this.currentPage},queryParamsHandling:"merge"})}pageChanged(t){this.currentPage!==t&&(this.currentPage=t,this.changeSubmitsRoute(),this.getTaskSubmits())}getTaskSubmits(){this.taskService.getTaskSubmits({start:this.currentPage*this.rowsDefault,sort:`${"asc"===this.sortOrder?"-":"+"}${this.sortColumn}`})}getProjectInfo(){this.projectService.getProjectInfo()}getTaskInfo(){this.taskService.getTaskInfo()}handleSortChange({sortOrder:t,colID:e}){this.taskService.getTaskSubmits(),this.sortOrder=t,this.sortColumn=e,this.getTaskSubmits()}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(j.a),a.Jb(h.a),a.Jb(b.a),a.Jb(n.b),a.Jb(n.a))},t.\u0275cmp=a.Db({type:t,selectors:[["app-task"]],decls:1,vars:1,consts:[["class","submits",4,"ngIf"],[1,"submits"],[3,"colsItems","rowsItems","sortCol","sortOrder","selectRowWithID","searchMatches","startIndex","component","onSortChange"],[1,"meta-panel-pagination",3,"currentPage","totalPages","onPageChange"],[3,"rows","rowsDefault",4,"ngIf"],[1,"submits-features"],[3,"rows","rowsDefault"]],template:function(t,e){1&t&&a.tc(0,K,8,11,"div",0),2&t&&a.fc("ngIf",e.taskSubmits)},directives:[i.k,T.a,D.a,U.a,z.a,A.a,L.a,J.a],styles:[""]}),t})(),W=(()=>{class t{constructor(){this.title="Submits"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Db({type:t,selectors:[["app-submits-page"]],decls:11,vars:0,template:function(t,e){1&t&&(a.Pb(0,"app-main-layout"),a.Pb(1,"app-header"),a.Pb(2,"header-body"),a.Kb(3,"app-task-selection"),a.Kb(4,"app-task-main-tabs"),a.Ob(),a.Ob(),a.Pb(5,"app-filters-panel"),a.Kb(6,"app-task-authors-filter"),a.Kb(7,"app-table-col-switcher"),a.Kb(8,"app-search"),a.Ob(),a.Pb(9,"app-main"),a.Kb(10,"app-task"),a.Ob(),a.Ob())},directives:[o.a,c.a,r.a,l.a,u.a,v,C,S.a,w.a,Z],styles:[""]}),t})();const B=[{path:"",component:W},{path:M.a.ComparedSubmits,loadChildren:()=>s.e(6).then(s.bind(null,"iyif")).then(t=>t.ComparisonPageModule),data:{id:"projectTaskComparedSubmits",breadcrumb:"comparises submits"}},{path:":submitID",component:W}];let $=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[n.e.forChild(B)],n.e]}),t})();var F=s("dFjG");let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[$,i.b,F.a]]}),t})()}}]);